{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/riski/Desktop/Data/Codingan/Web/_react/dietpedia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/riski/Desktop/Data/Codingan/Web/_react/dietpedia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/riski/Desktop/Data/Codingan/Web/_react/dietpedia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/riski/Desktop/Data/Codingan/Web/_react/dietpedia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/riski/Desktop/Data/Codingan/Web/_react/dietpedia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/riski/Desktop/Data/Codingan/Web/_react/dietpedia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Route,Switch}from'react-router-dom';import axios from'axios';import{trackPromise}from'react-promise-tracker';import Loader from'react-loader-spinner';import ArticleCard from'./Component/ArticleCard';import LoadingIndicator from'./index';import SearchCard from'./Component/Search-card';import Navbar from'./Component/Navbar';import NotFound from'./Component/NotFound';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.fetchSearchnutritionResults=function(){var updatedPageNo=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var queryNut=arguments.length>1?arguments[1]:undefined;// const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\n// By default the limit of nutritionResults is 20\nvar searchUrl=\"https://nutritionix-api.p.rapidapi.com/v1_1/search/\".concat(queryNut);var options={method:'GET',url:searchUrl,params:{fields:'item_name,item_id,brand_name,nf_calories,nf_total_fat'},headers:{'x-rapidapi-key':'518dacdf68mshe074609f26cc4e9p107185jsn84ce96ca1395','x-rapidapi-host':'nutritionix-api.p.rapidapi.com'}};if(_this.cancel){// Cancel the previous request before making a new request\n_this.cancel.cancel();}// Create a new CancelToken\n_this.cancel=axios.CancelToken.source();trackPromise(axios.request(options,{cancelToken:_this.cancel.token}).then(function(res){var resultNotFoundMsg=!res.data.hits.length?'Makanan Tidak Terdaftar.':'';_this.setState({nutritionResults:res.data.hits,nutritionMessage:resultNotFoundMsg,loading:false});}).catch(function(error){if(axios.isCancel(error)||error){_this.setState({loading:false,nutritionMessage:'Internet Tidak Terdeteksi.'});}}));};_this.handleOnInputChange=function(event){var queryNut=event.target.value;if(!queryNut){_this.setState({queryNut:queryNut,nutritionResults:{},nutritionMessage:''});}else{_this.setState({queryNut:queryNut,loading:true,nutritionMessage:''},function(){_this.fetchSearchnutritionResults(1,queryNut);});}// console.log(this.state.nutritionResults)\n};_this.renderSearchnutritionResults=function(){var nutritionResults=_this.state.nutritionResults;if(Object.keys(nutritionResults).length&&nutritionResults.length){return/*#__PURE__*/_jsx(\"div\",{className:\"hasil-search\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:nutritionResults.map(function(result,i){return/*#__PURE__*/_jsx(SearchCard,{id:nutritionResults[i].fields._id,item:nutritionResults[i].fields.item_name,brand:nutritionResults[i].fields.brand_name,porsi:nutritionResults[i].fields.nf_serving_size_qty,kalori:nutritionResults[i].fields.nf_calories,lemak:nutritionResults[i].fields.nf_total_fat});})})});}};_this.getThumbnail=function(){var searchUrl=\"https://google-search3.p.rapidapi.com/api/v1/images/q=diet%20food\";var options={method:'GET',url:searchUrl,headers:{'x-rapidapi-key':'518dacdf68mshe074609f26cc4e9p107185jsn84ce96ca1395','x-rapidapi-host':'google-search3.p.rapidapi.com'}};axios.request(options).then(function(res){// const resultNotFoundMsg = !res.data.news_results.length\n// \t? 'Tidak Ada Berita'\n// \t: '';\n_this.setState({thumbnailResults:res.data.image_results// articleMessage: resultNotFoundMsg,\n});// console.log(this.state.thumbnailResults[1].image.src)\n}).catch(function(error){console.log(error);});};_this.state={queryNut:'',nutritionResults:{},articleResults:{},thumbnailResults:{},loadingArticle:true,nutritionMessage:'',articleMessage:''};return _this;}_createClass(App,[{key:\"getGoogleNews\",value:function(){var _getGoogleNews=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://google-search3.p.rapidapi.com/api/v1/news/q=diet+sehat&hl=id\",{\"method\":\"GET\",\"headers\":{\"x-rapidapi-key\":\"518dacdf68mshe074609f26cc4e9p107185jsn84ce96ca1395\",\"x-rapidapi-host\":\"google-search3.p.rapidapi.com\"},redirect:\"follow\",// manual, *follow, error\nreferrerPolicy:\"no-referrer\"// no-referrer, *client\n// body: JSON.stringify(data) // Attach body with the request\n});case 2:response=_context.sent;_context.t0=this;_context.next=6;return response.json();case 6:_context.t1=_context.sent;_context.t2={articleResults:_context.t1,loadingArticle:false};_context.t0.setState.call(_context.t0,_context.t2);case 9:case\"end\":return _context.stop();}}},_callee,this);}));function getGoogleNews(){return _getGoogleNews.apply(this,arguments);}return getGoogleNews;}()},{key:\"renderGoogleNews\",value:function renderGoogleNews(){var _this$state=this.state,articleResults=_this$state.articleResults,thumbnailResults=_this$state.thumbnailResults;var entri=articleResults.entries;if(Object.keys(articleResults).length&&articleResults.entries.length){if(Object.keys(thumbnailResults).length&&thumbnailResults.length){// console.log(articleResults.entries[0])\n//    const buildMap = (key, values) => {\n// \t\t   const map = new Map();\n//\n// \t\t\t try {\n// \t\t\t\t for(let i = 0; i < key.length; i++){\n// \t\t\t\t\t\tmap.set(key[i], values[i]);\n// \t\t\t\t\t\tconsole.log(key[i].title)\n// \t\t\t\t\t\tif(i == 5)\n// \t\t\t\t\t\t\treturn (\n// \t\t\t\t\t\t\t\t<div>\n// \t\t\t\t\t\t\t\t\t<ArticleCard\n// \t\t\t\t\t\t\t\t\t\tid={ i }\n// \t\t\t\t\t\t\t\t\t\ttitle={ key[i].title }\n// \t\t\t\t\t\t\t\t\t\tsnippet={ key[i].link }\n// \t\t\t\t\t\t\t\t\t\tsource={ key[i].source.title }\n// \t\t\t\t\t\t\t\t\t\tthumbnail={ values[i].image.src }\n// \t\t\t\t\t\t\t\t\t\t/>\n// \t\t\t\t\t\t\t\t</div>\n// \t\t\t\t\t\t\t)\n// \t\t\t\t\t}\n//\n// \t\t\t }finally {\n//\n// \t\t\t }\n//\n//\n// };\n// return buildMap(entri,thumbnailResults)\n// console.log(thumbnailResults,entri)\nreturn/*#__PURE__*/_jsx(\"div\",{children:entri.slice(0,19).map(function(val,index){return/*#__PURE__*/_jsx(ArticleCard,{id:index,title:val.title,link:val.link,source:val.source.title,thumbnail:thumbnailResults[index].image.src});})});}}}},{key:\"componentDidMount\",value:function componentDidMount(){this.getGoogleNews();this.getThumbnail();}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,queryNut=_this$state2.queryNut,nutritionMessage=_this$state2.nutritionMessage,articleResults=_this$state2.articleResults,loadingArticle=_this$state2.loadingArticle;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 bagian-atas\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Cari Makanan\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-group has-search\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"material-icons size-22 form-control-feedback\",children:\"search\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2 search-custom\",type:\"text\",name:\"queryNut\",value:queryNut,placeholder:\"Search...\",onChange:_this2.handleOnInputChange})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"br\",{}),nutritionMessage&&/*#__PURE__*/_jsx(\"h5\",{children:nutritionMessage})]})]}),/*#__PURE__*/_jsx(LoadingIndicator,{}),_this2.renderSearchnutritionResults()]});}}),/*#__PURE__*/_jsx(Route,{path:\"/article\",render:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"hasil-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-12 bagian-atas\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Artikel\"})}),_this2.renderGoogleNews(),/*#__PURE__*/_jsx(Loader,{className:loadingArticle?'show-loader':'hide-loader',type:\"ThreeDots\",color:\"#94B447\",height:\"100\",width:\"100\"})]})})})});}}),/*#__PURE__*/_jsx(Route,{component:NotFound})]})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/riski/Desktop/Data/Codingan/Web/_react/dietpedia/src/App.js"],"names":["React","Route","Switch","axios","trackPromise","Loader","ArticleCard","LoadingIndicator","SearchCard","Navbar","NotFound","App","props","fetchSearchnutritionResults","updatedPageNo","queryNut","searchUrl","options","method","url","params","fields","headers","cancel","CancelToken","source","request","cancelToken","token","then","res","resultNotFoundMsg","data","hits","length","setState","nutritionResults","nutritionMessage","loading","catch","error","isCancel","handleOnInputChange","event","target","value","renderSearchnutritionResults","state","Object","keys","map","result","i","_id","item_name","brand_name","nf_serving_size_qty","nf_calories","nf_total_fat","getThumbnail","thumbnailResults","image_results","console","log","articleResults","loadingArticle","articleMessage","fetch","redirect","referrerPolicy","response","json","entri","entries","slice","val","index","title","link","image","src","getGoogleNews","renderGoogleNews","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport axios from 'axios';\nimport { trackPromise } from 'react-promise-tracker';\nimport Loader from 'react-loader-spinner';\n\nimport ArticleCard from './Component/ArticleCard'\nimport LoadingIndicator from './index';\nimport SearchCard from './Component/Search-card'\nimport Navbar from './Component/Navbar'\nimport NotFound from './Component/NotFound'\n\n\nclass App extends React.Component {\n\n\n\tconstructor( props ) {\n\n\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tqueryNut: '',\n\t\t\tnutritionResults: {},\n\t\t\tarticleResults: {},\n\t\t\tthumbnailResults: {},\n\t\t\tloadingArticle: true,\n\t\t\tnutritionMessage: '',\n\t\t\tarticleMessage: ''\n\t\t};\n\t}\n\n\tfetchSearchnutritionResults = (updatedPageNo = '', queryNut ) => {\n\n\t\t// const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\n\n\t\t// By default the limit of nutritionResults is 20\n\t\tconst searchUrl = `https://nutritionix-api.p.rapidapi.com/v1_1/search/${queryNut}`;\n\t\tconst options = {\n\t\t\tmethod: 'GET',\n\t\t\turl: searchUrl,\n\t\t\tparams: {fields: 'item_name,item_id,brand_name,nf_calories,nf_total_fat'},\n\t\t\theaders: {\n\t\t\t\t'x-rapidapi-key': '518dacdf68mshe074609f26cc4e9p107185jsn84ce96ca1395',\n\t\t\t\t'x-rapidapi-host': 'nutritionix-api.p.rapidapi.com'\n\t\t\t}\n\t\t};\n\n\t\tif (this.cancel) {\n\t\t\t// Cancel the previous request before making a new request\n\t\t\tthis.cancel.cancel();\n\t\t}\n\t\t// Create a new CancelToken\n\t\tthis.cancel = axios.CancelToken.source();\n\n\t\ttrackPromise(axios.request(options, {\n\t\t\t\tcancelToken: this.cancel.token,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tconst resultNotFoundMsg = !res.data.hits.length\n\t\t\t\t\t? 'Makanan Tidak Terdaftar.'\n\t\t\t\t\t: '';\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tnutritionResults: res.data.hits,\n\t\t\t\t\tnutritionMessage: resultNotFoundMsg,\n\t\t\t\t\tloading: false,\n\t\t\t\t});\n\t\t\t})\n\n\t\t\t.catch((error) => {\n\t\t\t\tif (axios.isCancel(error) || error) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tnutritionMessage: 'Internet Tidak Terdeteksi.',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}));\n\t};\n\nhandleOnInputChange = (event) => {\n\t\tconst queryNut = event.target.value;\n\t\t\tif ( !queryNut ) {\n\t\t\t\tthis.setState({ queryNut, nutritionResults: {}, nutritionMessage: '' } );\n\t\t\t} else {\n\t\t\t\tthis.setState({ queryNut, loading: true, nutritionMessage: '' }, () => {\n\t\t\t\t\tthis.fetchSearchnutritionResults(1, queryNut);\n\t\t\t\t});\n\t\t\t}\n\t\t// console.log(this.state.nutritionResults)\n\t};\n\nrenderSearchnutritionResults = () => {\n\t\tconst {nutritionResults} = this.state;\n\n\t\tif (Object.keys(nutritionResults).length && nutritionResults.length) {\n\t\t\treturn (\n\t\t\t\t\t<div className=\"hasil-search\">\n\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t{nutritionResults.map((result,i) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<SearchCard\n\t\t\t\t\t\t\t\t\t\tid={nutritionResults[i].fields._id}\n\t\t\t\t\t\t\t\t\t\titem={nutritionResults[i].fields.item_name}\n\t\t\t\t\t\t\t\t\t\tbrand={nutritionResults[i].fields.brand_name}\n\t\t\t\t\t\t\t\t\t\tporsi={nutritionResults[i].fields.nf_serving_size_qty}\n\t\t\t\t\t\t\t\t\t\tkalori={nutritionResults[i].fields.nf_calories}\n\t\t\t\t\t\t\t\t\t\tlemak={nutritionResults[i].fields.nf_total_fat}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n\t\t\t);\n\t\t}\n\t};\n\n\ngetThumbnail = () =>{\n\n\t\tconst searchUrl = `https://google-search3.p.rapidapi.com/api/v1/images/q=diet%20food`;\n\n\t\tconst options = {\n\t\t\t  method: 'GET',\n\t\t\t  url: searchUrl,\n\t\t\t  headers: {\n\t\t\t    'x-rapidapi-key': '518dacdf68mshe074609f26cc4e9p107185jsn84ce96ca1395',\n\t\t\t    'x-rapidapi-host': 'google-search3.p.rapidapi.com'\n\t\t\t  }\n\t\t\t};\n\n\t\taxios.request(options)\n\t\t\t.then((res) => {\n\t\t\t\t// const resultNotFoundMsg = !res.data.news_results.length\n\t\t\t\t// \t? 'Tidak Ada Berita'\n\t\t\t\t// \t: '';\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tthumbnailResults: res.data.image_results\n\t\t\t\t\t// articleMessage: resultNotFoundMsg,\n\t\t\t\t});\n\t\t\t\t// console.log(this.state.thumbnailResults[1].image.src)\n\t\t\t})\n\n\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t});\n\n\t}\n\nasync getGoogleNews(){\n\n\t\t const response = await fetch(\"https://google-search3.p.rapidapi.com/api/v1/news/q=diet+sehat&hl=id\", {\n\t\t\t \"method\": \"GET\",\n\t\t\t \"headers\": {\n\t\t\t\t \"x-rapidapi-key\": \"518dacdf68mshe074609f26cc4e9p107185jsn84ce96ca1395\",\n\t\t\t\t \"x-rapidapi-host\": \"google-search3.p.rapidapi.com\"\n\t\t\t },\n\t\t\t redirect: \"follow\", // manual, *follow, error\n\t\t\t referrerPolicy: \"no-referrer\", // no-referrer, *client\n\t\t\t // body: JSON.stringify(data) // Attach body with the request\n\t\t });\n\t\t this.setState({\n\t\t\t articleResults: await response.json(),\n\t\t\t loadingArticle:false\n\n\t\t });\n\n\n\t // \tconst searchUrl = `https://google-search3.p.rapidapi.com/api/v1/news/q=diet+sehat&cr=countryID&hl=id`;\n\t //\n\t // \tconst options = {\n\t // \t\t method: 'GET',\n\t // \t\t url: searchUrl,\n\t // \t\t headers: {\n\t // \t\t\t \t'Content-Type': 'application/json',\n\t // \t\t    'x-rapidapi-key': '518dacdf68mshe074609f26cc4e9p107185jsn84ce96ca1395',\n\t // \t\t    'x-rapidapi-host': 'google-search3.p.rapidapi.com'\n\t // \t\t  }\n\t // \t\t}\n\t //\n\t // \ttrackPromise(axios.request(options)\n\t // \t\t.then((res) => {\n\t // \t\t\t// const resultNotFoundMsg = !res.data.news_results.length\n\t // \t\t\t// \t? 'Tidak Ada Berita'\n\t // \t\t\t// \t: '';\n\t //\n\t // \t\t\tthis.setState({\n\t // \t\t\t\tarticleResults: res.data.entries\n\t // \t\t\t\t// articleMessage: resultNotFoundMsg,\n\t // \t\t\t});\n\t // \t\t\tconsole.log(this.state.articleResults)\n\t // \t\t})\n\t //\n\t // \t\t.catch((error) => {\n\t // \t\t\t\tconsole.log(error);\n\t // \t\t}));\n\t //\n}\n\nrenderGoogleNews(){\n\tconst {articleResults,thumbnailResults} = this.state;\n\tconst entri = articleResults.entries\n\n\tif (Object.keys(articleResults).length && articleResults.entries.length) {\n\t\tif (Object.keys(thumbnailResults).length && thumbnailResults.length) {\n\t\t\t// console.log(articleResults.entries[0])\n\t\t\t//    const buildMap = (key, values) => {\n\t\t\t// \t\t   const map = new Map();\n\t\t\t//\n\t\t\t// \t\t\t try {\n\t\t\t// \t\t\t\t for(let i = 0; i < key.length; i++){\n\t\t\t// \t\t\t\t\t\tmap.set(key[i], values[i]);\n\t\t\t// \t\t\t\t\t\tconsole.log(key[i].title)\n\t\t\t// \t\t\t\t\t\tif(i == 5)\n\t\t\t// \t\t\t\t\t\t\treturn (\n\t\t\t// \t\t\t\t\t\t\t\t<div>\n\t\t\t// \t\t\t\t\t\t\t\t\t<ArticleCard\n\t\t\t// \t\t\t\t\t\t\t\t\t\tid={ i }\n\t\t\t// \t\t\t\t\t\t\t\t\t\ttitle={ key[i].title }\n\t\t\t// \t\t\t\t\t\t\t\t\t\tsnippet={ key[i].link }\n\t\t\t// \t\t\t\t\t\t\t\t\t\tsource={ key[i].source.title }\n\t\t\t// \t\t\t\t\t\t\t\t\t\tthumbnail={ values[i].image.src }\n\t\t\t// \t\t\t\t\t\t\t\t\t\t/>\n\t\t\t// \t\t\t\t\t\t\t\t</div>\n\t\t\t// \t\t\t\t\t\t\t)\n\t\t\t// \t\t\t\t\t}\n\t\t\t//\n\t\t\t// \t\t\t }finally {\n\t\t\t//\n\t\t\t// \t\t\t }\n\t\t\t//\n\t\t\t//\n\t\t\t// };\n\t\t\t// return buildMap(entri,thumbnailResults)\n\n\t\t\t\t  // console.log(thumbnailResults,entri)\n\t\t\t\t\treturn (\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{entri.slice(0,19).map((val,index) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ArticleCard\n\t\t\t\t\t\t\t\t\t\t\t\tid={ index }\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={ val.title }\n\t\t\t\t\t\t\t\t\t\t\t\tlink={ val.link }\n\t\t\t\t\t\t\t\t\t\t\t\tsource={ val.source.title }\n\t\t\t\t\t\t\t\t\t\t\t\tthumbnail={ thumbnailResults[index].image.src }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t}\n\t}\n}\n\ncomponentDidMount(){\n\tthis.getGoogleNews();\n\tthis.getThumbnail();\n}\n\n\trender() {\n\t\tconst {queryNut, nutritionMessage, articleResults,loadingArticle} = this.state;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Navbar/>\n\t\t\t\t<Switch>\n\t\t\t\t\t{/*route search*/}\n\t\t\t\t\t<Route exact path=\"/\"\n\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t\t\t\t{/*Heading*/}\n\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 bagian-atas\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h2>Cari Makanan</h2>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group has-search\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"material-icons size-22 form-control-feedback\">search</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t className=\"form-control me-2 search-custom\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t type=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t name=\"queryNut\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t value={queryNut}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t placeholder=\"Search...\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t onChange={this.handleOnInputChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-12\"><br/>\n\t\t\t\t\t\t\t\t\t\t\t\t{ nutritionMessage && <h5>{ nutritionMessage }</h5> }\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<LoadingIndicator/>\n\t\t\t\t\t\t\t\t\t\t{ this.renderSearchnutritionResults() }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*route article*/}\n\t\t\t\t\t<Route path=\"/article\"\n\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t          <div className=\"hasil-search\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-12 bagian-atas\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h2>Artikel</h2>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.renderGoogleNews()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Loader className={loadingArticle ? 'show-loader' : 'hide-loader' } type=\"ThreeDots\" color=\"#94B447\" height=\"100\" width=\"100\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t      </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route component={NotFound}/>\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}